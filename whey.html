<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Whey Protein | Coreano Suplementos</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <div class="navbar">
    <div>
      <a href="index.html">In√≠cio</a>
      <a href="produtos.html">Produtos</a>
      <a href="#">Contato</a>
      <span class="cart-icon" id="cart-icon">
        <span class="emoji-cart">üõí</span>
        <span class="quantidade-carrinho" id="quantidade-carrinho">0</span>
      </span>
    </div>
  </div>

  <main class="produtos-container">
    <h2>Whey Protein</h2>

    <div class="produtos-grid">
      <!-- Produto 1 -->
      <div class="produto-card">
        <img src="images/wheydarklab.png" alt="Whey Protein Concentrado 1KG - Dark Lab">
        <h3>Whey Protein Concentrado 1KG - Dark Lab</h3>
        <p>R$145,00 no PIX</p>
        <div class="sabor-box">
          <h4>Selecione o sabor:</h4>
          <select id="sabor-select-0">
            <option value="chocolate">Chocolate</option>
            <option value="morango">Morango</option>
            <option value="baunilha">Baunilha</option>
            <option value="cookies">Cookies e Cream</option>
            <option value="pa√ßoca">Pa√ßoca</option>
            <option value="banana">Banana</option>
            <option value="chocolate_branco">Chocolate Branco</option>
            <option value="doce_de_leite">Doce de Leite</option>
          </select>
          <button onclick="adicionarCarrinho(0)">Adicionar ao Carrinho</button>
        </div>
      </div>

      <!-- Produto 2 -->
      <div class="produto-card">
        <img src="images/wheydarklabIsolateFuse1.8kg.png" alt="Isolate Protein Fuse 1,8kg - Dark Lab
        ">
        <h3>Isolate Protein Fuse 1,8kg - Dark Lab        </h3>
        <p>R$159,90 no PIX</p>
        <div class="sabor-box">
          <h4>Selecione o sabor:</h4>
          <select id="sabor-select-1">
            <option value="baunilha">Baunilha</option>
            <option value="morango">Morango</option>
            <option value="caf√©">Caf√©</option>
            <option value="caramelo">Caramelo</option>
          </select>
          <button onclick="adicionarCarrinho(1)">Adicionar ao Carrinho</button>
        </div>
      </div>
    </div>
  </main>

  <div class="modal-carrinho" id="modal-carrinho">
    <h3>Seu Carrinho</h3>
    <div id="itens-carrinho"></div>
    <div class="resumo-pedido">
      <h4>Resumo do Pedido</h4>
      <ul id="lista-resumo"></ul>
      <p><strong>Total: R$ <span id="total-pedido">0,00</span></strong></p>
      <button class="btn-finalizar" onclick="finalizarCompraCarrinho()">Finalizar Compra no WhatsApp</button>
    </div>
  </div>

  <footer>
    <p>&copy; 2025 Coreano Suplementos. Todos os direitos reservados.</p>
  </footer>

  <script>
    const produtos = [
      { nome: "Whey Protein Concentrado 1kg - Dark Lab", preco: 145.00 },
      { nome: "Whey Protein Isolado 1kg - Marca XYZ", preco: 189.00 }
    ];

    let carrinho = [];
    let modalCarrinho = document.getElementById("modal-carrinho");
    let quantidadeCarrinhoElement = document.getElementById("quantidade-carrinho");
    let cartIcon = document.getElementById("cart-icon");

    cartIcon.addEventListener("click", function(event) {
      event.stopPropagation();
      modalCarrinho.style.display = (modalCarrinho.style.display === "block") ? "none" : "block";
    });

    document.addEventListener("click", function(event) {
      if (!modalCarrinho.contains(event.target) && event.target !== cartIcon) {
        modalCarrinho.style.display = "none";
      }
    });

    function adicionarCarrinho(produtoId) {
      const saborSelecionado = document.getElementById(`sabor-select-${produtoId}`).value;
      if (!saborSelecionado) {
        alert("Selecione um sabor antes de adicionar ao carrinho.");
        return;
      }

      const produto = produtos[produtoId];
      carrinho.push({ produto, sabor: saborSelecionado });
      atualizarCarrinho();
    }

    function atualizarCarrinho() {
      const carrinhoContainer = document.getElementById("itens-carrinho");
      const listaResumo = document.getElementById("lista-resumo");
      const totalPedido = document.getElementById("total-pedido");

      carrinhoContainer.innerHTML = "";
      listaResumo.innerHTML = "";

      let total = 0;

      if (carrinho.length === 0) {
        carrinhoContainer.innerHTML = "<p>Seu carrinho est√° vazio.</p>";
      } else {
        carrinho.forEach((item, index) => {
          const li = document.createElement("li");
          li.textContent = `${item.produto.nome} - ${item.sabor} - R$ ${item.produto.preco.toFixed(2)}`;
          listaResumo.appendChild(li);

          const div = document.createElement("div");
          div.classList.add("carrinho-item");
          div.innerHTML = `${item.produto.nome} - Sabor: ${item.sabor} - R$${item.produto.preco.toFixed(2)} <button onclick="removerItemCarrinho(${index})">üîù</button>`;
          carrinhoContainer.appendChild(div);

          total += item.produto.preco;
        });
      }

      quantidadeCarrinhoElement.style.display = carrinho.length > 0 ? 'inline' : 'none';
      quantidadeCarrinhoElement.textContent = carrinho.length;
      totalPedido.textContent = total.toFixed(2);
    }

    function removerItemCarrinho(index) {
      carrinho.splice(index, 1);
      atualizarCarrinho();
    }

    function finalizarCompraCarrinho() {
      if (carrinho.length === 0) {
        alert("Seu carrinho est√° vazio!");
        return;
      }

      let mensagem = "Resumo da Compra:\n";
      carrinho.forEach(item => {
        mensagem += `${item.produto.nome} - Sabor: ${item.sabor} - R$${item.produto.preco.toFixed(2)}\n`;
      });

      const urlWhatsApp = `https://wa.me/5561985402592?text=${encodeURIComponent(mensagem)}`;
      window.open(urlWhatsApp, "_blank");
    }
  </script>
</body>
</html>